"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Struct=void 0;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Struct=/*#__PURE__*/function(){function a(){_classCallCheck(this,a);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];this.properties=c,this.byteLength=c.map(function(a){return a.byteLength}).reduce(function(a,b){return a+b}),this.getObject=this.createObject,this.getObjects=this.createArray}return _createClass(a,[{key:"createArray",value:function createArray(a,b,c,d){for(var e=b+c*this.byteLength,f=[],g=b;g<e;g+=this.byteLength)f.push(this.createObject(a,g,d));return f}},{key:"createObject",value:function createObject(b,c,d){var e={offsetTo:{},dataView:new DataView(b),isLittleEndian:d},f=c;return this.properties.forEach(function(b){switch(e.offsetTo[b.propertyName]=f,b.propertyType){case a.Types.Int8:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getInt8(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setInt8(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Uint8:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getUint8(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setUint8(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Int16:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getInt16(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setInt16(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Uint16:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getUint16(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setUint16(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Int32:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getInt32(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setInt32(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Uint32:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getUint32(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setUint32(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.BigInt64:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getBigInt64(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setBigInt64(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.BigUint64:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getBigUint64(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setBigUint64(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Float32:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getFloat32(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setFloat32(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.Float64:Object.defineProperty(e,b.propertyName,{get:function get(){return e.dataView.getFloat64(e.offsetTo[b.propertyName],e.isLittleEndian)},set:function set(a){return e.dataView.setFloat64(e.offsetTo[b.propertyName],a,e.isLittleEndian)}});break;case a.Types.ByteArray:Object.defineProperty(e,b.propertyName,{get:function get(){for(var a=e.offsetTo[b.propertyName],c=a+b.byteLength,d=new Uint8Array(b.byteLength),f=a,g=0;f<c;f++,g++)d[g]=e.dataView.getUint8(f,e.isLittleEndian);return d},set:function set(a){if(!(a instanceof Uint8Array))throw new Error("Incorrect type. Byte Arrays may only be type Uint8Array");if(a.length!==b.byteLength)throw new Error("Incorrect Uint8Array length. ".concat(a," has a length of ").concat(a.length,", but ").concat(b.propertyName," must have a length of ").concat(b.byteLength));for(var c=e.offsetTo[b.propertyName],d=c+b.byteLength,f=c,g=0;f<d;f++,g++)e.dataView.setUint8(f,a[g],e.isLittleEndian)}});}f+=b.byteLength}),e.byteLength=f-c,e.nextOffset=f,e.endPosition=f-1,e}}],[{key:"Int8",value:function Int8(b){return{propertyName:b,propertyType:a.Types.Int8,byteLength:1}}},{key:"Uint8",value:function Uint8(b){return{propertyName:b,propertyType:a.Types.Uint8,byteLength:1}}},{key:"Int16",value:function Int16(b){return{propertyName:b,propertyType:a.Types.Int16,byteLength:2}}},{key:"Uint16",value:function Uint16(b){return{propertyName:b,propertyType:a.Types.Uint16,byteLength:2}}},{key:"Int32",value:function Int32(b){return{propertyName:b,propertyType:a.Types.Int32,byteLength:4}}},{key:"Uint32",value:function Uint32(b){return{propertyName:b,propertyType:a.Types.Uint32,byteLength:4}}},{key:"BigInt64",value:function BigInt64(b){return{propertyName:b,propertyType:a.Types.BigInt64,byteLength:8}}},{key:"BigUint64",value:function BigUint64(b){return{propertyName:b,propertyType:a.Types.BigUint64,byteLength:8}}},{key:"Float32",value:function Float32(b){return{propertyName:b,propertyType:a.Types.Float32,byteLength:4}}},{key:"Float64",value:function Float64(b){return{propertyName:b,propertyType:a.Types.Float64,byteLength:8}}},{key:"ByteArray",value:function ByteArray(b,c){return{propertyName:b,propertyType:a.Types.ByteArray,byteLength:c}}},{key:"Skip",value:function Skip(b){return{propertyType:a.Types.Skip,byteLength:b}}}]),a}();exports.Struct=Struct,_defineProperty(Struct,"Types",{Int8:"Int8",Uint8:"Uint8",Int16:"Int16",Uint16:"Uint16",Int32:"Int32",Uint32:"Uint32",BigInt64:"BigInt64",BigUint64:"BigUint64",Float32:"Float32",Float64:"Float64",ByteArray:"ByteArray",Skip:"Skip"});